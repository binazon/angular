USE RefReport;

DELETE FROM T_BOOKMARK_DIRECT_REPORT;
DELETE FROM TJ_REPORT_CONFIG_TO_PARAM_TYPE WHERE report_config_fk IN (SELECT rc.pk FROM T_REPORT_CONFIG rc, T_OFFER_OPTION oo WHERE oo.ALIAS = 'IPER_E2E_INTERACTIVE' AND rc.OFFER_OPTION_FK=oo.pk);
DELETE FROM T_GROUP_REPORT_CONFIG WHERE REPORT_CONFIG_FK IN (SELECT rc.pk FROM T_REPORT_CONFIG rc, T_OFFER_OPTION oo WHERE oo.ALIAS = 'IPER_E2E_INTERACTIVE' AND rc.OFFER_OPTION_FK=oo.pk);
DELETE FROM TJ_INDICATOR_TO_REPORT_CONFIG WHERE report_config_fk IN (SELECT rc.pk FROM T_REPORT_CONFIG rc, T_OFFER_OPTION oo WHERE oo.ALIAS = 'IPER_E2E_INTERACTIVE' AND rc.OFFER_OPTION_FK=oo.pk);
DELETE FROM T_REPORT_CONFIG WHERE OFFER_OPTION_FK IN (SELECT pk FROM T_OFFER_OPTION WHERE ALIAS = 'IPER_E2E_INTERACTIVE');
DELETE FROM T_HYPERLINK WHERE OFFER_OPTION_FK IN (SELECT pk FROM T_OFFER_OPTION WHERE ALIAS = 'IPER_E2E_INTERACTIVE');
DELETE FROM TJ_REPORTING_GROUP_TO_OFFER_OPTION WHERE OFFER_OPTION_FK IN (SELECT pk FROM T_OFFER_OPTION WHERE ALIAS = 'IPER_E2E_INTERACTIVE');
DELETE FROM T_OFFER_OPTION WHERE ALIAS = 'IPER_E2E_INTERACTIVE';

DELETE FROM TJ_REPORT_CONFIG_TO_PARAM_TYPE WHERE report_config_fk IN (SELECT rc.pk FROM T_REPORT_CONFIG rc, T_REPORT r WHERE r.ref_id LIKE 'REPORT_832%' AND rc.REPORT_FK=r.pk);
DELETE FROM T_GROUP_REPORT_CONFIG WHERE REPORT_CONFIG_FK IN (SELECT rc.pk FROM T_REPORT_CONFIG rc, T_REPORT r WHERE r.ref_id LIKE 'REPORT_832%' AND rc.REPORT_FK=r.pk);
DELETE FROM TJ_INDICATOR_TO_REPORT_CONFIG WHERE report_config_fk IN (SELECT rc.pk FROM T_REPORT_CONFIG rc, T_REPORT r WHERE r.ref_id LIKE 'REPORT_832%' AND rc.REPORT_FK=r.pk);
DELETE FROM T_REPORT_CONFIG WHERE REPORT_FK IN (SELECT pk FROM T_REPORT WHERE ref_id LIKE 'REPORT_832%');
DELETE FROM  T_REPORT WHERE ref_id LIKE 'REPORT_832%';

DELETE FROM TJ_REPORT_CONFIG_TO_PARAM_TYPE WHERE report_config_fk IN (SELECT rc.pk FROM T_REPORT_CONFIG rc, T_REPORT r WHERE r.ref_id LIKE 'REPORT_899%' AND rc.REPORT_FK=r.pk);
DELETE FROM T_GROUP_REPORT_CONFIG WHERE REPORT_CONFIG_FK IN (SELECT rc.pk FROM T_REPORT_CONFIG rc, T_REPORT r WHERE r.ref_id LIKE 'REPORT_899%' AND rc.REPORT_FK=r.pk);
DELETE FROM TJ_INDICATOR_TO_REPORT_CONFIG WHERE report_config_fk IN (SELECT rc.pk FROM T_REPORT_CONFIG rc, T_REPORT r WHERE r.ref_id LIKE 'REPORT_899%' AND rc.REPORT_FK=r.pk);
DELETE FROM T_REPORT_CONFIG WHERE REPORT_FK IN (SELECT pk FROM T_REPORT WHERE ref_id LIKE 'REPORT_899%');
DELETE FROM  T_REPORT WHERE ref_id LIKE 'REPORT_899%';

DELETE FROM TJ_REPORT_CONFIG_TO_PARAM_TYPE WHERE report_config_fk IN (SELECT pk FROM T_REPORT_CONFIG WHERE alias='REPORTCONFIG_891_REPORT_911_TEMPLATE');
DELETE FROM T_GROUP_REPORT_CONFIG WHERE REPORT_CONFIG_FK IN (SELECT pk FROM T_REPORT_CONFIG WHERE alias='REPORTCONFIG_891_REPORT_911_TEMPLATE');
DELETE FROM T_REPORT_CONFIG WHERE alias='REPORTCONFIG_891_REPORT_911_TEMPLATE';

DELETE FROM TJ_REPORT_CONFIG_TO_PARAM_TYPE WHERE report_config_fk IN (SELECT pk FROM T_REPORT_CONFIG WHERE alias='REPORTCONFIG_892_REPORT_916_TEMPLATE');
DELETE FROM T_GROUP_REPORT_CONFIG WHERE REPORT_CONFIG_FK IN (SELECT pk FROM T_REPORT_CONFIG WHERE alias='REPORTCONFIG_892_REPORT_916_TEMPLATE');
DELETE FROM T_REPORT_CONFIG WHERE alias='REPORTCONFIG_892_REPORT_916_TEMPLATE';

DELETE FROM T_REPORT_INPUT WHERE REPORT_INPUT_REF IN ('LOGICALCONNECTION_FLOW_IPCM_E2E_CASSANDRA','ACCESS_FLOW_IPCM_E2E_CASSANDRA','ACCESS_COS_IPCM_E2E_CASSANDRA','LOGICALCONNECTION_COS_IPCM_E2E_CASSANDRA','COS_TYPE0_IPCM_E2E_CASSANDRA','CPU_IPCM_E2E_EQUIPMENT_CASSANDRA');
DELETE FROM T_INPUT_COLUMN WHERE input_format_fk IN (SELECT pk FROM T_INPUT_FORMAT WHERE FORMAT_TYPE in ('LOGICALCONNECTION_FLOW_IPCM_E2E','ACCESS_FLOW_IPCM_E2E','ACCESS_COS_IPCM_E2E','LOGICALCONNECTION_COS_IPCM_E2E'));
DELETE FROM T_INPUT_FORMAT WHERE FORMAT_TYPE IN ('LOGICALCONNECTION_FLOW_IPCM_E2E','ACCESS_FLOW_IPCM_E2E','ACCESS_COS_IPCM_E2E','LOGICALCONNECTION_COS_IPCM_E2E');

DELETE FROM T_INPUT_COLUMN WHERE INPUT_FORMAT_FK IN (SELECT pk FROM T_INPUT_FORMAT WHERE format_type='PHYSICALCONNECTION_LOADRATE_E2E');

DROP TABLE T_GROUP_PARTITION_STATUS;
CREATE TABLE T_GROUP_PARTITION_STATUS (
  ENTITY_TYPE VARCHAR(255) NOT NULL,
  DATE VARCHAR(6) NOT NULL,
  PARTITIONS TEXT,
  REPORTING_GROUP_FK BIGINT(20) NOT NULL,
  PRIMARY KEY (REPORTING_GROUP_FK,ENTITY_TYPE,DATE),
  KEY INDEX_T_GROUP_PARTITION_STATUS (REPORTING_GROUP_FK,DATE),
  FOREIGN KEY (REPORTING_GROUP_FK) REFERENCES T_REPORTING_GROUP (PK)
);