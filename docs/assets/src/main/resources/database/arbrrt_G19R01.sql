USE RefReport;

/*################ REMOVE ABO_MIGRATION RELATED REPORT_CONFIGs ##################*/
DELETE 
FROM T_REPORT_CONFIG 
WHERE REPORT_FK IN (SELECT PK 
					FROM T_REPORT 
					WHERE REF_ID IN (	'OVPFE_RAW_CONSOMMATION_I_EXTENDED',
										'OVPFE_RAW_CONSOMMATION_N_EXTENDED',
										'OVPFE_RAW_MEETINGS_EXTENDED',
										'OVPFE_RAW_MEETING_PARTICIPANTS_EXTENDED',
										'OVPFE_RAW_MERGED_CDR_EXTENDED',
										'OVPFE_RAW_TERMINALS_EXTENDED')
				   );


/*################ REMOVE ABO_MIGRATION RELATED REPORTS ##################*/
DELETE 
FROM T_REPORT 
WHERE REF_ID IN ('OVPFE_RAW_CONSOMMATION_I_EXTENDED',
				 'OVPFE_RAW_CONSOMMATION_N_EXTENDED',
				 'OVPFE_RAW_MEETINGS_EXTENDED',
				 'OVPFE_RAW_MEETING_PARTICIPANTS_EXTENDED',
				 'OVPFE_RAW_MERGED_CDR_EXTENDED',
				 'OVPFE_RAW_TERMINALS_EXTENDED');

/*################ REMOVE ABO_MIGRATION RELATED OFFER_OPTIONs IN COLLECT ##################*/
DELETE 
FROM T_OFFER_OPTION 
WHERE OFFER_FK=(SELECT PK FROM T_OFFER WHERE ALIAS='COLLECT') AND 
	  ALIAS IN ('OVPFE_RAW_CONSOMMATION_I'
	  			'OVPFE_RAW_CONSOMMATION_N', 
	  			'OVPFE_RAW_MEETINGS', 
	  			'OVPFE_RAW_MEETING_PARTICIPANTS', 
	  			'OVPFE_RAW_MERGED_CDR', 
	  			'OVPFE_RAW_TERMINALS');
	  			
/*################ REMOVE ABO_MIGRATION RELATED REPORTOUTPUTS ##################*/
DELETE 
FROM T_REPORT_OUTPUT 
WHERE URI LIKE '%OVPFE_RAW_CONSOMMATION_I.xml' OR 
	  URI LIKE '%OVPFE_RAW_CONSOMMATION_N.xml' OR 
	  URI LIKE '%OVPFE_RAW_MEETINGS.xml' OR 
	  URI LIKE '%OVPFE_RAW_MEETING_PARTICIPANTS.xml' OR 
	  URI LIKE '%OVPFE_RAW_MERGED_CDR.xml' OR 
	  URI LIKE '%OVPFE_RAW_TERMINALS.xml';		

/*################ REMOVE ABO_MIGRATION RELATED REPORTINPUTS AND T_INPUT_FORMAT ##################*/
DELETE 
FROM T_REPORT_INPUT 
WHERE REPORT_INPUT_REF IN ('OVPFE_RAW_CONSOMMATION_I_FILE',
						   'OVPFE_RAW_CONSOMMATION_I',
						   'OVPFE_RAW_CONSOMMATION_N_FILE',
						   'OVPFE_RAW_CONSOMMATION_N',
						   'OVPFE_RAW_MEETINGS_FILE',
						   'OVPFE_RAW_MEETINGS',
						   'OVPFE_RAW_MEETING_PARTICIPANTS_FILE',
						   'OVPFE_RAW_MEETING_PARTICIPANTS',
						   'OVPFE_RAW_MERGED_CDR_FILE',
						   'OVPFE_RAW_MERGED_CDR',
						   'OVPFE_RAW_TERMINALS_FILE',
						   'OVPFE_RAW_TERMINALS');
						   DELETE 
FROM T_INPUT_COLUMN 
WHERE INPUT_FORMAT_FK IN (	SELECT PK 
							FROM T_INPUT_FORMAT 
							WHERE FORMAT_TYPE IN ( 'OVPFE_RAW_CONSOMMATION_I_FILE',
												   'OVPFE_RAW_CONSOMMATION_I',
												   'OVPFE_RAW_CONSOMMATION_N_FILE',
												   'OVPFE_RAW_CONSOMMATION_N',
												   'OVPFE_RAW_MEETINGS_FILE',
												   'OVPFE_RAW_MEETINGS',
												   'OVPFE_RAW_MEETING_PARTICIPANTS_FILE',
												   'OVPFE_RAW_MEETING_PARTICIPANTS',
												   'OVPFE_RAW_MERGED_CDR_FILE',
												   'OVPFE_RAW_MERGED_CDR',
												   'OVPFE_RAW_TERMINALS_FILE',
												   'OVPFE_RAW_TERMINALS')
						 );	
						 
DELETE 
FROM T_INPUT_FORMAT 
WHERE FORMAT_TYPE IN (	'OVPFE_RAW_CONSOMMATION_I_FILE',
						'OVPFE_RAW_CONSOMMATION_I',
						'OVPFE_RAW_CONSOMMATION_N_FILE',
						'OVPFE_RAW_CONSOMMATION_N',
						'OVPFE_RAW_MEETINGS_FILE',
						'OVPFE_RAW_MEETINGS',
						'OVPFE_RAW_MEETING_PARTICIPANTS_FILE',
						'OVPFE_RAW_MEETING_PARTICIPANTS',
						'OVPFE_RAW_MERGED_CDR_FILE',
						'OVPFE_RAW_MERGED_CDR',
						'OVPFE_RAW_TERMINALS_FILE',
						'OVPFE_RAW_TERMINALS');
